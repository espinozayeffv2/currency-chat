{"version":3,"sources":["Message.js","axios.js","axiosCurrency.js","App.js","index.js"],"names":["Message","forwardRef","ref","message","username","isUser","currentUser","className","Card","CardContent","Typography","variant","component","instance","axios","create","baseURL","pusher","Pusher","cluster","formatNumber","fns","x","reduce","v","f","pipe","value","decimals","Number","Math","round","Intl","NumberFormat","format","App","useState","input","setInput","messages","setMessages","setUsername","fetchMessages","a","data","console","error","useEffect","prompt","subscribe","bind","sendMessage","e","preventDefault","currencyMessage","includes","quantity","split","axiosCurrency","params","access_key","currencies","catch","conversion","quotes","USDCOP","post","FormControl","Input","placeholder","onChange","target","IconButton","color","disabled","onClick","type","map","id","_id","user","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.45d29985.chunk.js","sourcesContent":["import { Card, CardContent, Typography } from '@material-ui/core'\nimport React, { forwardRef } from 'react'\nimport './Message.css'\n\nconst Message = forwardRef(({ message, username, currentUser }, ref) => {\n    const isUser = currentUser === username\n    return (\n        <div ref={ref} className={`message ${isUser && 'message__user'}`} >\n            <Card className={isUser ? 'message__userCard' : 'message__guestCard'}>\n                <CardContent>\n                    <Typography\n                        variant='h5'\n                        component='h2'\n                    >\n                        {!isUser && `${username || 'Usuario desconocido'}:`}\n                        {message}\n                    </Typography>\n                </CardContent>\n            </Card>\n        </div>\n    )\n})\n\nexport default Message","import axios from 'axios';\n\nconst instance = axios.create({\n\tbaseURL: 'https://solati-test.herokuapp.com/api'\n});\n\nexport default instance;","import axios from 'axios';\n\nconst instance = axios.create({\n\tbaseURL: 'http://api.currencylayer.com'\n});\n\nexport default instance;","import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { FormControl, Input } from '@material-ui/core';\nimport Message from './Message';\nimport FlipMove from 'react-flip-move';\nimport SendIcon from '@material-ui/icons/Send';\nimport IconButton from '@material-ui/core/IconButton';\nimport axios from './axios';\nimport axiosCurrency from './axiosCurrency';\nimport Pusher from 'pusher-js';\n\nconst pusher = new Pusher('dbca6b598453283932d2', {\n  cluster: 'us2'\n});\n\nconst getCurrency = () => {\n  const params = {\n    access_key: '3b9ca85e040ed075f28083d4abdbd6d4',\n    currencies: 'COP',\n  }\n\n  return axiosCurrency('/live', { params });\n} \n\nconst pipe = (...fns) => x => fns.reduce((v, f) => f(v), x);\n\nconst roundNumber = (value = 0, decimals = 2) => Number(Math.round(value+'e'+decimals)+'e-'+decimals);\n\nconst addSeparatos = (value) =>     value = value ?? 0\n  ? Intl.NumberFormat().format(value)\n  : 0;\n\nconst formatNumber = pipe(roundNumber, addSeparatos);\n\nexport default function App(){\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [username, setUsername] = useState('Usuario desconocido');\n\n  const fetchMessages = async () => {\n    try {\n      const { data } = await axios('/messages');\n      setMessages(data);\n    } catch(e) {\n      console.error(e);\n    }\n  }\n\n  useEffect(() => {\n    fetchMessages()\n  }, []);\n\n  useEffect(() => {\n    setUsername(prompt('Por favor, ingresa tu nombre'))\n  }, []);\n\n  useEffect(() => {\n    const channel = pusher.subscribe('messages');\n    channel.bind('newMessage', (data) => fetchMessages())\n  }, [username]);\n\n  const sendMessage = async (e) => {\n    e.preventDefault()\n\n    let currencyMessage = null;\n\n    if (input.includes('/convertir')) {\n      const quantity = input.split(' ')[1];\n      if (quantity) {\n        const { data }  = await getCurrency(quantity).catch(console.error);\n        const conversion = quantity / data.quotes.USDCOP\n        currencyMessage = `${formatNumber(quantity)}COP equivalen a ${formatNumber(conversion)}USD`;\n      }\n    }\n\n    axios.post('/message', {\n      username,\n      message: currencyMessage ?? input\n    })\n\n    setInput('')\n  }\n\n  return (\n    <div className=\"App\">\n      <h2>Bienvenido {username}</h2>\n\n      <form className='app__form' >\n        <FormControl className='app__formControl' >\n          <Input className='app__input' placeholder='Escribe un mensaje...' value={input} onChange={(e) => setInput(e.target.value)} />\n          <IconButton className='app__iconButton' variant='text' color='primary' disabled={!input} onClick={sendMessage} type=\"submit\" >\n            <SendIcon />\n          </IconButton>\n        </FormControl>\n      </form>\n\n      <FlipMove className='flipMove__custom'>\n        {\n          messages.map(({ _id: id, username: user, message }) => (\n            <Message key={id} message={message} username={user} currentUser={username} />\n          ))\n        }\n      </FlipMove>\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n \t<App />,\n  \tdocument.getElementById('root')\n);\n"],"sourceRoot":""}